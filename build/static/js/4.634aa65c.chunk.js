(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{529:function(e,t,a){e.exports=a.p+"static/media/defauly.83e22d51.jpg"},530:function(e,t,a){e.exports=a.p+"static/media/happy.681130e7.png"},531:function(e,t,a){e.exports=a.p+"static/media/sad.182bca20.png"},533:function(e,t,a){"use strict";a.r(t);var n=a(532),o=a(0),c=a.n(o),l=a(522),r=(a(523),a(14)),i=(a(524),a(515)),s=a(263),p=a(267),u=a(534),d=a(518),h=(a(126),a(529)),m=a.n(h),f=a(530),E=a(531);t.default=function(){var e=Object(o.useState)([]),t=Object(n.a)(e,2),a=t[0],h=t[1],g=Object(o.useState)(Object(r.b)()),y=Object(n.a)(g,1)[0],j=Object(o.useState)(!1);Object(n.a)(j,1)[0];Object(o.useEffect)((function(){fetch("http://localhost:80/api/posts",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),h(e),console.log(a)}))}),[]);var b=function(){h(a.concat(Array.from({length:5})))};return c.a.createElement("div",{style:{height:"50%",overflowY:"scroll"}},a.map((function(e){return c.a.createElement("div",{key:e._id},c.a.createElement(l.a,{onScroll:!0,dataLength:a.length,next:b,hasMore:a.post<3,loader:c.a.createElement("h4",null,"Loading...")},c.a.createElement(i.a,null,c.a.createElement(i.a.Event,null,c.a.createElement(i.a.Label,{style:{backgroundColor:"white",width:"70px",height:"70px"}},c.a.createElement(s.a,{fluid:!0,circular:!0,as:"a",href:"/user/".concat(e.postedBy._id),style:{mainHeight:"60px",maxHeight:"60px",mainWidth:"60px",maxWidth:"60px"},src:"http://localhost/api/user/photo/".concat(e.postedBy._id),onError:function(e){return e.target.src="".concat(m.a)}})),c.a.createElement(i.a.Content,null,c.a.createElement(i.a.Summary,null,Object(r.b)().user&&Object(r.b)().user._id===e.postedBy._id&&c.a.createElement(p.a,{onClick:function(){return function(e){Object(r.b)().user._id;fetch("http://localhost:80/api/deletepost/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.filter((function(t){return t._id!==e._id}));h(t)})).catch((function(e){console.log(e)}))}(e._id)},style:{float:"right"}},"Delete"),c.a.createElement(i.a.Summary,{key:e.postedBy},e.postedBy.name),c.a.createElement(i.a.Date,null,new Date(e.created).toDateString())),c.a.createElement(i.a.Extra,{text:!0},e.body),c.a.createElement(i.a.Extra,{Image:!0},c.a.createElement("img",{style:{mainHeight:"300px",maxHeight:"300px",mainWidth:"300px",maxWidth:"300px"},src:"http://localhost/api/post/photo/".concat(e._id),onError:"",alt:""})),c.a.createElement(i.a.Meta,{style:{display:"inline"}},Object(r.b)()&&c.a.createElement(i.a.Like,null,c.a.createElement("div",null,e.likes.includes(y.user._id)?c.a.createElement(s.a,{style:{maxHeight:"30px",maxWidth:"30px"},src:E,onClick:function(){!function(e){var t=Object(r.b)().user._id;fetch("http://localhost:80/api/posts/unlike",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},body:JSON.stringify({postId:e,userId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t,a){return t._id===e._id?e:t}));h(t)}))}(e._id)}}):c.a.createElement(s.a,{style:{maxHeight:"30px",maxWidth:"30px"},src:f,onClick:function(){!function(e){var t=Object(r.b)().user._id;fetch("http://localhost:80/api/posts/like",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},body:JSON.stringify({userId:t,postId:e})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));h(t)}))}(e._id)}}),e.likes.length," likes")),c.a.createElement("div",null,c.a.createElement(u.a.Group,null,c.a.createElement(d.a,{as:"h3",dividing:!0}),e.comments.map((function(e){return c.a.createElement(u.a,null,c.a.createElement(u.a.Avatar,{src:"http://localhost/api/user/photo/".concat(e.postedBy._id)}),c.a.createElement(u.a.Content,null,c.a.createElement(u.a.Author,{as:"a"},e.postedBy.name),c.a.createElement(u.a.Metadata,null,c.a.createElement("div",null,"Today at 5:42PM")),c.a.createElement(u.a.Text,null,e.text),c.a.createElement(u.a.Actions,null,c.a.createElement(u.a.Action,null,"Reply"))))})),c.a.createElement(u.a,null,c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),function(e,t){var n=Object(r.b)().user._id;fetch("http://localhost:80/api/posts/comment",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("jwt")},body:JSON.stringify({postId:t,userId:n,text:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.map((function(t){return t._id===e._id?e:t}));h(t)})).catch((function(e){console.log(e)}))}(t.target[0].value,e._id)}},c.a.createElement("input",{type:"text",placeholder:"Comment.."})))))),c.a.createElement("hr",null))))))})))}}}]);
//# sourceMappingURL=4.634aa65c.chunk.js.map